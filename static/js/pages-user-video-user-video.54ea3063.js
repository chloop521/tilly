(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-video-user-video"],{"109c":function(t,e,i){"use strict";i.r(e);var n=i("2cff"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"2cff":function(t,e,i){"use strict";var n=i("4ea4");i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2909")),s=n(i("5530")),o=n(i("3fa2")),u=i("2f62"),c={components:{mediaList:o.default},data:function(){return{page:1,loadText:"上拉加载更多",list:[]}},onShow:function(){this.getData()},computed:(0,s.default)({},(0,u.mapState)({user_id:function(t){return t.user?t.user.id:0}})),onPullDownRefresh:function(){this.page=1,this.getData().then((function(t){uni.showToast({title:"刷新成功",icon:"none"}),uni.stopPullDownRefresh()})).catch((function(t){uni.showToast({title:"刷新失败",icon:"none"}),uni.stopPullDownRefresh()}))},onReachBottom:function(){"上拉加载更多"===this.loadText&&(this.loadText="正在加载中...",this.page=this.page+1,this.getData())},methods:{deleteVideo:function(t){var e=this;this.$H.post("/video/destroy",{id:t.id},{token:!0}).then((function(t){uni.showToast({title:"删除成功",icon:"none"}),e.getData()}))},edit:function(t){uni.navigateTo({url:"../create/create?data="+encodeURIComponent(JSON.stringify(t))})},openVideoList:function(t){uni.navigateTo({url:"../user-video-list/user-video-list?id="+t.id})},getData:function(){var t=this;uni.showLoading({title:"加载中...",mask:!1});var e=this.page;return this.$H.get("/video_list/".concat(this.page,"?user_id=").concat(this.user_id)).then((function(i){uni.hideLoading(),t.list=1===e?i:[].concat((0,a.default)(t.list),(0,a.default)(i)),t.loadText=i.length<10?"没有更多":"上拉加载更多"})).catch((function(e){uni.hideLoading(),t.page>1&&t.page--,t.loadText="上拉加载更多"}))}}};e.default=c},"3b90":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t._l(t.list,(function(e,n){return i("v-uni-view",{key:n},[i("media-list",{attrs:{item:e,index:n}}),i("v-uni-view",{staticClass:"flex",staticStyle:{height:"100rpx"}},[i("v-uni-view",{staticClass:"flex-1 flex align-center justify-center",attrs:{"hover-class":"bg-light"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.edit(e)}}},[t._v("修改")]),i("v-uni-view",{staticClass:"flex-1 flex align-center justify-center",attrs:{"hover-class":"bg-light"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openVideoList(e)}}},[t._v("视频")]),i("v-uni-view",{staticClass:"flex-1 flex align-center justify-center",attrs:{"hover-class":"bg-light"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteVideo(e)}}},[t._v("删除")])],1),i("v-uni-view",{staticClass:"f-divider"})],1)})),0===t.list.length?i("v-uni-view",{staticClass:"flex align-center justify-center text-secondary",staticStyle:{height:"200rpx"}},[t._v("暂无数据")]):t.list.length>10?i("v-uni-view",{staticClass:"flex align-center justify-center font-md text-secondary",staticStyle:{height:"80rpx"},attrs:{"hover-class":"bg-light"}},[t._v(t._s(t.loadText))]):t._e()],2)},s=[]},"3fa2":function(t,e,i){"use strict";i.r(e);var n=i("58996"),a=i("d29b");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);var o,u=i("f0c5"),c=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"0ec06344",null,!1,n["a"],o);e["default"]=c.exports},58996:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"flex align-center py-2 border-bottom",staticStyle:{width:"750rpx","box-sizing":"border-box"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"rounded-lg mx-2 flex-shrink",staticStyle:{width:"260rpx",height:"160rpx"},attrs:{src:t.item.cover}}),i("v-uni-view",{staticClass:"flex-1 flex flex-column"},[i("v-uni-text",{staticClass:"font",staticStyle:{"line-height":"1.2"}},[t._v(t._s(t.item.title))]),i("v-uni-text",{staticClass:"font-sm text-light-muted mt-auto"},[t._v(t._s(t.item.create_time))]),i("v-uni-view",{staticClass:"flex align-center justify-between text-muted line-h"},[i("v-uni-view",{staticClass:"line-h"},[i("v-uni-text",{staticClass:"iconfont iconbofangshu font-md mx-1"}),i("v-uni-text",{staticClass:"font-sm"},[t._v(t._s(t.item.play_count))])],1),i("v-uni-view",{staticClass:"line-h"},[i("v-uni-text",{staticClass:"iconfont icondanmushu font-md mx-1"}),i("v-uni-text",{staticClass:"font-sm"},[t._v(t._s(t.item.danmu_count))])],1),i("v-uni-text",{staticClass:"iconfont icongengduo"})],1)],1)],1)},s=[]},c4ab:function(t,e,i){"use strict";i("c740"),i("a434"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{item:Object,index:[String,Number]},methods:{toFirst:function(t,e){return 0!=e&&t.unshift(t.splice(e,1)[0]),t},open:function(){var t=this;uni.navigateTo({url:"/pages/detail-video/detail-video?id="+this.item.id});var e=uni.getStorageSync("history");e=e?JSON.parse(e):[];var i=e.findIndex((function(e){return e.id===t.item.id}));-1===i?e.unshift(this.item):this.toFirst(e,i),uni.setStorage({key:"history",data:JSON.stringify(e)})}}};e.default=n},c9ab:function(t,e,i){"use strict";i.r(e);var n=i("3b90"),a=i("109c");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);var o,u=i("f0c5"),c=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"33116f0c",null,!1,n["a"],o);e["default"]=c.exports},d29b:function(t,e,i){"use strict";i.r(e);var n=i("c4ab"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a}}]);